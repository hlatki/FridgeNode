function SetupWords(a){var b=jQuery.parseJSON(a),c=[],d=0,e=b.length;for(d=0;d<e;d++)c.push('<li class="ui-draggable" id="'+b[d].ind+'" style="left:'+b[d].posLeft+"; top: "+b[d].posTop+';">'+b[d].wordstring+"</li>"),wordTimes[b[d].ind]=null;$("<ul/>",{id:"board",html:c.join("")}).appendTo("body")}var socket,wordTimes=new Array;$(document).ready(function(){socket=io.connect(),socket.emit("get positions"),socket.on("get positions",function(a){SetupWords(a),$("li").draggable({containment:"parent",cursor:"move",stack:".ui-draggable",start:function(a,b){var c=$(this).attr("id");socket.emit("start move",c)},drag:function(a,b){var c=$(this).position(),d=$(this).attr("id");socket.emit("in drag",d,c.left,c.top)},stop:function(a,b){var c=$(this).position(),d=$(this).attr("id");socket.emit("move word",d,c.left,c.top)}})}),socket.on("start move",function(a){var b="#"+a;wordTimes[a]=(new Date).getTime(),$(b).hasClass("ui-draggable-dragging")||($(b).draggable("disable"),$(b).css({"background-color":"#CCC",color:"#999",border:"1px solid 666"}))}),socket.on("move word",function(a,b,c){var d="#"+a;$(d).draggable("enable"),$(d).css({"background-color":"white",color:"black",border:"1px solid black"}),$(d).css({left:b,top:c})}),socket.on("in drag",function(a,b,c){var d="#"+a;$(d).hasClass("ui-draggable-dragging")||$(d).css({left:b,top:c})}),socket.on("get count",function(a){if(a>1)var b=a+" users connected";else var b="1 user connected";$("#numUsers").text(b)});var a=setInterval(function(){var a=(new Date).getTime();for(var b in wordTimes){var c="#"+b,d=(new Date).setTime(a-wordTimes[b]);if($(c).hasClass("ui-draggable-disabled")&&wordTimes[b]!=null){var d=(new Date).setTime(a-wordTimes[b]);d>5e3&&($(c).draggable("enable"),wordTimes[b]=null)}}},1e4)})